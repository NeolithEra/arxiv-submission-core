
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Submission &amp; moderation subsystem architecture &#8212; arXiv submission &amp; moderation 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Submission &amp; Publication Process" href="publication_process.html" />
    <link rel="prev" title="Submission &amp; moderation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="submission-moderation-subsystem-architecture">
<h1>Submission &amp; moderation subsystem architecture<a class="headerlink" href="#submission-moderation-subsystem-architecture" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The submission and moderation subsystem provides:</p>
<ul class="simple">
<li>Accession of submission of publication content and metadata via multiple
interfaces, including interfaces provided by trusted third-party platforms;</li>
<li>Quality assurance tools and workflows to screen submissions (moderation);</li>
<li>An extensible system for automating parts of the moderation process;</li>
<li>An event-based log of all submission and moderation activity related
associated with a paper.</li>
</ul>
<p>In short, the submission and moderation subsystem is responsible for all
submission-related activities up to (but not including) publication.</p>
</div>
<div class="section" id="key-requirements">
<h2>Key requirements<a class="headerlink" href="#key-requirements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>The system must sensibly incorporate input from, and synchronize the
activities of, a variety of human and non-human agents.</li>
<li>It must be possible for administrators to audit all changes to submission
state in the system (e.g. by submitters, moderators, automated processes,
etc).</li>
<li>Administrators must be able to configure automated rules and processes.</li>
<li>The system must support future development of potentially many alternative
interfaces for submission and moderation, including interfaces developed
and operated by trusted third-parties.</li>
<li>The system must be able to support a high volume of activity, potentially
two orders of magnitude greater than current levels (~11k submissions per
month in early 2018).</li>
<li>The system must make it easier to support future operational and policy
changes around submission content, quality assurance, metadata, and other
areas of concern.</li>
</ol>
</div>
<div class="section" id="solution-strategy">
<h2>Solution Strategy<a class="headerlink" href="#solution-strategy" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Submission system</dt>
<dd>Refers to the collection of services/applications, data stores, and other
components involved in the accession and moderation of new arXiv papers.</dd>
<dt>Submission</dt>
<dd>Refers to a collection of descriptive and operational metadata, including
a reference to a content object (e.g. a TeX source package, PDF, etc), that
has been accessioned for possible publication in arXiv.</dd>
</dl>
<div class="section" id="separation-of-concerns">
<h3>Separation of concerns<a class="headerlink" href="#separation-of-concerns" title="Permalink to this headline">¶</a></h3>
<p>In the classic arXiv submission system, there is tight coupling between the
submission and a variety of related objects and processes. For example,
processes like TeX compilation, auto-classification, etc are integrated with
web controllers for the submission UI. A major benefit of this approach is that
it keeps operations close together in the submission workflow. A major drawback
is its relative inflexibility: developing any one component of the submission
system risks generating cascading effects to other components, and assumptions
about the implementation details of components are baked into the system.</p>
<p>One of the major shifts in the NG reimplementation of the submission system is
to pull some of those components apart into self-contained services with
clearly-defined APIs. Our goal is to limit coupling to where it really matters,
and open the door to exchangeability of those components. This should make it
easier to develop individual components without breaking the whole system, and
also make it easier to respond to changing operational policies and procedures.</p>
<p>The <a class="reference internal" href="#utility-services"><span class="std std-ref">Utility services</span></a> section describes some of the backend components
that will be “compartmentalized” as stand-alone services in NG.</p>
</div>
<div class="section" id="commands-events-as-data">
<h3>Commands (events) as data<a class="headerlink" href="#commands-events-as-data" title="Permalink to this headline">¶</a></h3>
<p>The classic arXiv submission system is built around an object-centric data
model. Submissions are represented objects whose properties map to rows in a
database table, and workflows are implemented by developing web controllers
that mutate those objects (and the underlying rows). In order to support
administrative requirements of visibility onto activity in the submission
system, a log is updated by those controllers whenever they are executed.
Conditional operations are implemented by adding procedures to those
controllers. This model works well for simple systems in which there is a
single point of entry for submission data: each controller is solely
responsible for a command or set of commands, and so coupling between user
request handling/views and the commands themselves (along with conditional
operations linked to those commands) is not problematic.</p>
<p>A requirement of arXiv-NG is to provide consistent support for evolving and
potentially many accession pathways into arXiv. A limitation of the classic
architecture is that it requires new submission interfaces to reimplement the
commands (and rules) that it exposes, and to reimplement updates to the
administrative log. In the NG submission system, commands (and log updates)
are independent of the interface controllers – this allows for a greater
deal of flexibility when implementing or changing interfaces. We can achieve
this either by implementing a command controller as standalone service that
handles commands from other applications, or by implementing a software package
that exposes commands as an internal API (arXiv-lib could be seen as an
attempt in that direction, although it is somewhat defeated by its broad scope
and leakage of business logic).</p>
<p>Another major requirement of arXiv-NG is to support triggers and automated
processes that can be configured by administrators, in addition to continuing
to support to the administrative log. A step in this direction would be to
include hooks for triggers behind the command API (above), and load parameters
(e.g. set in a database or a configuration file by an admin) that control
whether/how the trigger is executed. This has the potential to not scale well,
however, as the kinds of triggers and automation required must be anticipated
ahead of time and semi-hard-coded into the system. An alternative approach (the
one adopted here) is to define a set of primitives that explicitly represent
commands and rules, and build interfaces that allow them to be combined
arbitrarily to build workflows. In this approach, instances of command
execution (events) themselves are treated as data. This meets the requirements
of maintaining a high-fidelity comprehensive activity log.</p>
<p>A knock-on benefit of treating command execution/events as data is that it
allows for freer evolution of how we represent submission objects. If event
data are treated as the primary source of truth, the representation of the
submission itself can be treated as a secondary and somewhat disposable
projection. In the short term, as we reimplement components of the submission
system, we will need to guarantee that we generate projections in the classic
submission database that satisfy the requirements of legacy components that
have not yet been reimplemented. For example, when implementing a new
submission UI for NG we can collect and store new forms of data about a
submission in the event data (e.g. data used to populate new metadata fields),
but must also ensure that the appropriate tables in the classic database are
kept up-to-date for the sake of the classic moderation system. In the longer
term, projections of event data can be used to support efficient queries, but
do not constrain the evolution of the submission system in other areas.</p>
</div>
<div class="section" id="id1">
<h3>Overview<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>We will decouple most functional components of the classic submission system
into independent services that are agnostic about submissions. This includes
classification, overlap detection, compilation (TeX, PS), and upload/file
management.</li>
<li>We will implement a <a class="reference internal" href="#submission-core-events-package"><span class="std std-ref">Python package</span></a>
that is responsible for all commands in the scope of the submission system.
That package should:<ul>
<li>Define the commands that are available in the submission system, and
provide a Python API for executing those commands.</li>
<li>Provide an API for defining rules and conditional operations based on those
commands.</li>
<li>Be responsible for updating the core submission database. It should persist
command execution instances/events in the core database, and also generate
projections of submission state that support query/read operations and
that are compatible with legacy components.</li>
</ul>
</li>
<li>A set of <a class="reference internal" href="#core-interface-services"><span class="std std-ref">core submission interface services</span></a>
will provide UIs and APIs to support various submission and moderation
workflows. Those services will utilize the the core command/event package
(above).</li>
</ul>
</div>
</div>
<div class="section" id="context">
<h2>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h2>
<p>Authenticated users submit new publications via a user interface. Users can
view the status of their submissions, including feedback and interventions by
moderators and administrators, and amend their submissions as necessary. They
can also view a preview of their submission, and make amendments to the source
files in their submission. Authors can supplement their published and
unpublished submissions with links to external resources and other
supplemental metadata.</p>
<p>Moderators (authenticated users with a moderator role) screen and curate
submissions through a moderation interface. They can generate comments, flags,
proposals, and other annotations attached to submissions.</p>
<p>Administrators audit and manage the submission platform, including the
behavior of automated processes and policies, through an administrative
interface. They can define rules using command/event types and conditions on
event data, and link those to other commands or processes that will execute
automatically when conditions are met.</p>
<p>Authors may also submit papers via authorized third-party interfaces, which
integrate with arXiv via HTTP APIs exposed by the arXiv API gateway. API
clients may deposit submissions in bulk (e.g. conference proceedings), or on
an individual basis acting directly on behalf of an arXiv user. Submissions
handled by clients operated by trusted partners may be handled differently than
submissions originating from the arXiv submission interface, as dictated by
arXiv policies.</p>
</div>
<div class="section" id="containers-services-building-blocks">
<h2>Containers (Services &amp; Building Blocks)<a class="headerlink" href="#containers-services-building-blocks" title="Permalink to this headline">¶</a></h2>
<div class="figure" id="id13">
<span id="figure-submission-containers"></span><img alt="_images/submissionContainers.png" src="_images/submissionContainers.png" />
<p class="caption"><span class="caption-number">Fig. 1 </span><span class="caption-text">Containers in the arXiv submission &amp; moderation subsystem.</span></p>
</div>
<div class="section" id="submission-database">
<span id="id2"></span><h3>Submission database<a class="headerlink" href="#submission-database" title="Permalink to this headline">¶</a></h3>
<p>The submission database (currently MySQL) is responsible for the persistence of
operational and core descriptive metadata about submissions. Operational
metadata includes information related to arXiv workflows and processes. Core
descriptive metadata are the core publication metadata fields required for
arXiv submissions (e.g. title, authors, abstract). The primary source of truth
for the state of each submission is a set of transformation events. Derivative
representations (e.g. of submission objects) are also stored for querying and
rapid access.</p>
<p>In early phases of the classic renewal process, this will be the classic MySQL
database running in the CUL-IT datacenter. Upon migration to the cloud, this
may be replaced with something else.</p>
</div>
<div class="section" id="core-interface-services">
<span id="id3"></span><h3>Core interface services<a class="headerlink" href="#core-interface-services" title="Permalink to this headline">¶</a></h3>
<p>These services provide the core submission, moderation, and administrative
interfaces for the arXiv submission system. Each of these services integrates
with the <a class="reference internal" href="#submission-database"><span class="std std-ref">Submission database</span></a> to modify submission state, via the
<a class="reference internal" href="#submission-core-events-package"><span class="std std-ref">Submission core events package</span></a>.</p>
<p>Asynchronous operations (e.g. to execute rule-based logic) are performed by a
<a class="reference internal" href="#submission-worker"><span class="std std-ref">Submission worker</span></a> process. Communication between the interface services
and the worker is mediated by a task queue (Redis). Tasks passed on the queue
are implemented in the <a class="reference internal" href="#submission-core-events-package"><span class="std std-ref">Submission core events package</span></a> using
<a class="reference external" href="http://www.celeryproject.org/">Celery</a>.</p>
<p>These core interface services integrate with other services in the submission
system (e.g. <a class="reference internal" href="#file-management-service"><span class="std std-ref">File management service</span></a>, <a class="reference internal" href="#compilation-service"><span class="std std-ref">Compilation service</span></a>) via
their HTTP APIs.</p>
<div class="section" id="submission-core-events-package">
<span id="id4"></span><h4>Submission core events package<a class="headerlink" href="#submission-core-events-package" title="Permalink to this headline">¶</a></h4>
<p>This package provides an event-based Python API for CRUD operations on
submissions and submission-related (meta)data. Services (below) that operate
on submission data do so via this abstraction, which integrates with the
<a class="reference internal" href="#submission-database"><span class="std std-ref">Submission database</span></a>.</p>
<p>Rather than perform CRUD operations directly on submission objects, all
operations that modify submission data are performed through the creation of
submission events. This ensures that we have a precise and complete record of
activities concerning submissions, an explicit definition of
operations that can be performed within the arXiv submission system, and a
starting-point for building rule-based workflows to support moderation and
administrative tasks.</p>
<p>This package also provides integration with a Kinesis notification broker,
which propagates notifications about events in real time to other services
in the arXiv system (e.g. the <span class="xref std std-ref">webook-notification-service</span>).</p>
<p>To support automated processes, this package also implements a set of
asynchronous tasks using <a class="reference external" href="http://www.celeryproject.org/">Celery</a>. Provides
integration with a task queue (Redis) for message passing.</p>
<p>See <span class="xref std std-ref">submission-core-events-package-containers</span>.</p>
</div>
<div class="section" id="submission-worker">
<span id="id6"></span><h4>Submission worker<a class="headerlink" href="#submission-worker" title="Permalink to this headline">¶</a></h4>
<p>The submission worker is a Celery process that executes tasks defined in the
<a class="reference internal" href="#submission-core-events-package"><span class="std std-ref">Submission core events package</span></a> and dispatched by core interface
services. This allows us to implement rule processing asynchronously, if needed
for longer-running operations.</p>
</div>
<div class="section" id="submission-ui-service">
<h4>Submission UI service<a class="headerlink" href="#submission-ui-service" title="Permalink to this headline">¶</a></h4>
<p>Provides form-based views that allow users to create and update submissions,
and track the state of their submission through the moderation and publication
process. The interface supports metadata entry, source package upload, and
integrates with the <a class="reference internal" href="#compilation-service"><span class="std std-ref">Compilation service</span></a> to assist the submitter in
preparing a publication-ready submission package.</p>
<p>Uses the <a class="reference internal" href="#submission-core-events-package"><span class="std std-ref">Submission core events package</span></a> to update submission state in
the <a class="reference internal" href="#submission-database"><span class="std std-ref">Submission database</span></a>.</p>
</div>
<div class="section" id="submission-api-service">
<h4>Submission API service<a class="headerlink" href="#submission-api-service" title="Permalink to this headline">¶</a></h4>
<p>Provides a RESTful API for trusted clients to facilitate submission to arXiv
via external/third-party user interfaces.  Uses the
<a class="reference internal" href="#submission-core-events-package"><span class="std std-ref">Submission core events package</span></a> to update submission state in the
<a class="reference internal" href="#submission-database"><span class="std std-ref">Submission database</span></a>.</p>
<p>This will replace the existing <a class="reference external" href="https://arxiv.org/help/submit_sword">arXiv SWORDv1 API</a>.</p>
</div>
<div class="section" id="moderation-ui-service">
<h4>Moderation UI service<a class="headerlink" href="#moderation-ui-service" title="Permalink to this headline">¶</a></h4>
<p>Supports moderator actions on submissions. Comprised of a client-side
application (implemented in <a class="reference external" href="https://reactjs.org/">React</a>) backed by a
lightweight Flask service. Uses the
<a class="reference internal" href="#submission-core-events-package"><span class="std std-ref">Submission core events package</span></a> to update submission state in the
<a class="reference internal" href="#submission-database"><span class="std std-ref">Submission database</span></a>.</p>
</div>
<div class="section" id="administrative-ui-service">
<h4>Administrative UI service<a class="headerlink" href="#administrative-ui-service" title="Permalink to this headline">¶</a></h4>
<p>The administrator interfaces provides visibility onto all parts of the
submission service, including the state and event history of all submissions
and submission annotations in the system. Administrators are able to configure
automated policies and processes, intervene on submission content and metadata,
and act on moderator proposals and comments.</p>
</div>
</div>
<div class="section" id="utility-services">
<span id="id7"></span><h3>Utility services<a class="headerlink" href="#utility-services" title="Permalink to this headline">¶</a></h3>
<p>The following utility services support the submission and moderation workflow,
providing a menu of functionality used by UI and API services to support
accession and quality assurance.</p>
<div class="section" id="file-management-service">
<span id="id8"></span><h4>File management service<a class="headerlink" href="#file-management-service" title="Permalink to this headline">¶</a></h4>
<p>This service is responsible for ensuring the safety and suitability of files
uploaded to the submission system. The file management service accepts
uploads, performs verification and sanitization, and makes the upload available
for use by other services.</p>
</div>
<div class="section" id="compilation-service">
<span id="id9"></span><h4>Compilation service<a class="headerlink" href="#compilation-service" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://github.com/cul-it/arxiv-converter">https://github.com/cul-it/arxiv-converter</a></p>
<p>The build service compiles sanitized upload packages into PDF, PostScript,
and other formats. This service encompasses the arXiv TeX tree. Compilation
logs are also made available, for example to provide submitters feedback about
compilation failures or warnings.</p>
</div>
<div class="section" id="plain-text-extraction-service">
<span id="id10"></span><h4>Plain text extraction service<a class="headerlink" href="#plain-text-extraction-service" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://github.com/cul-it/arxiv-fulltext">https://github.com/cul-it/arxiv-fulltext</a></p>
<p>Extracts plain text content from PDFs, for use by the for overlap detection
and classification services. Makes both raw extracted text and normalized
“PSV” tokenized text available to other services.</p>
</div>
<div class="section" id="overlap-detection-service">
<span id="id11"></span><h4>Overlap detection service<a class="headerlink" href="#overlap-detection-service" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://github.com/cul-it/arxiv-docsim">https://github.com/cul-it/arxiv-docsim</a></p>
<p>Operates on extracted plain text content and submission metadata to
detect possibly duplicate submissions. Returns an array of published arXiv
papers with a high degree of overlap.</p>
</div>
<div class="section" id="classifier-service">
<span id="id12"></span><h4>Classifier service<a class="headerlink" href="#classifier-service" title="Permalink to this headline">¶</a></h4>
<p><a class="reference external" href="https://github.com/cul-it/arxiv-classifier">https://github.com/cul-it/arxiv-classifier</a></p>
<p>Operates on extracted plain text content and submission metadata to
propose categories for submitted papers.</p>
</div>
<div class="section" id="notification-service">
<h4>Notification service<a class="headerlink" href="#notification-service" title="Permalink to this headline">¶</a></h4>
<p>Responsible for dispatching email notifications to submitters, moderators,
in response to submission system events. Provides UIs for end-user and
administrator configuration.</p>
</div>
<div class="section" id="endorsement-service">
<h4>Endorsement service<a class="headerlink" href="#endorsement-service" title="Permalink to this headline">¶</a></h4>
<p>Provides submitter endorsement mechanisms. Submission services can use the
backend API provided by this service to validate author endorsement. Provides
administrative and submitter UIs to manage endorsement status.</p>
</div>
</div>
<div class="section" id="web-hook-notification-service">
<h3>Web-hook notification service<a class="headerlink" href="#web-hook-notification-service" title="Permalink to this headline">¶</a></h3>
<p>Provides mechanisms for API clients to register callbacks for submission
events. Event consumer is implemented using the Kinesis Consumer Library and
MultiLangDaemon [refs].</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">arXiv submission & moderation</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Submission &amp; moderation subsystem architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#key-requirements">Key requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#solution-strategy">Solution Strategy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#context">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="#containers-services-building-blocks">Containers (Services &amp; Building Blocks)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="publication_process.html">Submission &amp; Publication Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="submission_api_context.html">Submission API: Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers/core/events.html">events package</a></li>
<li class="toctree-l1"><a class="reference internal" href="containers/metadata/metadata.html">metadata package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Submission &amp; moderation</a></li>
      <li>Next: <a href="publication_process.html" title="next chapter">Submission &amp; Publication Process</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, arXiv.org.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/architecture.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>